let express,path,fetch;_d35‍.w("express",[["default",["express"],function(v){express=v}]]);_d35‍.w("path",[["default",["path"],function(v){path=v}]]);_d35‍.w("node-fetch",[["default",["fetch"],function(v){fetch=v}]]);




const app = express();
const PORT = process.env.PORT || 3002;

app.set('view engine', 'ejs');
app.set('views', path.join(__dirname, 'views'));

app.use(express.static(path.join(__dirname, 'public')));

app.get('/', async (req, res) => {
    try {
        const APIKey = '77126df6578f72416c6c44eb6b924bfa';
        const city = 'Dehradun';

        // Fetch weather data from the OpenWeatherMap API
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${APIKey}`);
        const json = await response.json();

        // Extract relevant data from the API response
        const data = {
            weatherIconUrl: `https://openweathermap.org/img/wn/${json.weather[0].icon}.png`,
            temperature: parseInt(json.main.temp),
            weatherDescription: json.weather[0].description,
            humidity: json.main.humidity,
            windSpeed: parseInt(json.wind.speed),
        };

        // Render the 'index' view with the extracted data
        res.render('index', { data });
    } catch (error) {
        _d35‍.g.console.error('Error fetching weather data:', error);
        res.status(500).json({ error: 'Internal Server Error' });
    }
});

app.listen(PORT, () => {
    console.log(`Server is running on port ${PORT}`);
});
